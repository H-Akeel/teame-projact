<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="..//Photo/t ~.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Suite | ŸÖŸÜÿµÿ© ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ©</title>

  <!-- Libraries -->
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js`;</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <!-- Sortable.js for drag and drop sorting -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    /* üé® ŸÜŸÅÿ≥ ÿßŸÑÿ™ŸÜÿ≥ŸäŸÇÿßÿ™ ÿßŸÑÿ£ÿµŸÑŸäÿ© ÿØŸàŸÜ ÿ£Ÿä ÿ™ÿ∫ŸäŸäÿ± */
    :root {
      --bg-color: #eef2f9;
      --card-color: #f5f8fc;
      --primary-color: #4a55ff;
      --primary-light: #6a72ff;
      --secondary-color: #a45eff;
      --text-color: #2c3e50;
      --muted-color: #8d99ae;
      --border-color: rgba(255, 255, 255, 0.5);
      --shadow-light: rgba(136, 165, 191, 0.48);
      --shadow-dark: rgba(255, 255, 255, 0.8);
      --radius: 16px;
      --transition: all 0.3s ease;
    }
    [data-theme="dark"] {
      --bg-color: #1b1f28;
      --card-color: #242936;
      --primary-color: #5a64ff;
      --primary-light: #7a82ff;
      --secondary-color: #b46eff;
      --text-color: #edf2f4;
      --muted-color: #a0aec0;
      --border-color: rgba(0, 0, 0, 0.2);
      --shadow-light: rgba(0, 0, 0, 0.3);
      --shadow-dark: rgba(255, 255, 255, 0.05);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.7;
      display: flex;
      transition: var(--transition);
      overflow: hidden;
    }
    
    :root {
      --bg-color: #eef2f9;
      --card-color: #f5f8fc;
      --primary-color: #4a55ff;
      --primary-light: #6a72ff;
      --secondary-color: #a45eff;
      --text-color: #2c3e50;
      --muted-color: #8d99ae;
      --border-color: rgba(255, 255, 255, 0.5);
      --shadow-light: rgba(136, 165, 191, 0.48);
      --shadow-dark: rgba(255, 255, 255, 0.8);
      --radius: 16px;
      --transition: all 0.3s ease;
    }
    
    [data-theme="dark"] {
      --bg-color: #1b1f28;
      --card-color: #242936;
      --primary-color: #5a64ff;
      --primary-light: #7a82ff;
      --secondary-color: #b46eff;
      --text-color: #edf2f4;
      --muted-color: #a0aec0;
      --border-color: rgba(0, 0, 0, 0.2);
      --shadow-light: rgba(0, 0, 0, 0.3);
      --shadow-dark: rgba(255, 255, 255, 0.05);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'IBM Plex Sans Arabic', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.7;
      display: flex;
      transition: var(--transition);
      overflow: hidden;
    }

    /* --- Sidebar --- */
    .sidebar {
      width: 260px;
      background-color: var(--card-color);
      padding: 30px 20px;
      height: 100vh;
      position: sticky;
      top: 0;
      display: flex;
      flex-direction: column;
      border-inline-end: 1px solid var(--border-color);
      box-shadow: 5px 0 20px rgba(0,0,0,0.02);
      transition: var(--transition);
    }
    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 40px;
      text-align: center;
    }
    .nav-menu { list-style: none; flex-grow: 1; }
    .nav-item a {
      display: flex;
      align-items: center;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: var(--radius);
      text-decoration: none;
      color: var(--muted-color);
      font-weight: 500;
      transition: var(--transition);
      cursor: pointer;
    }
    .nav-item a:hover { background-color: var(--bg-color); color: var(--primary-color); }
    .nav-item a.active {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      box-shadow: 0 5px 15px rgba(74, 85, 255, 0.3);
    }
    .nav-item i { font-size: 1.2rem; width: 30px; margin-inline-end: 15px; }
    .theme-switcher {
      background: var(--bg-color);
      border: none;
      padding: 12px;
      border-radius: var(--radius);
      cursor: pointer;
      color: var(--muted-color);
      font-size: 1.2rem;
      transition: var(--transition);
    }
    .theme-switcher:hover {
      color: var(--primary-color);
    }

    /* --- Main Content --- */
    .main-content {
      flex-grow: 1;
      padding: 40px;
      height: 100vh;
      overflow-y: auto;
    }
    .tool-page { 
      display: none; 
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    .tool-page.active { 
      display: block; 
      opacity: 1;
      transform: translateY(0);
    }
    
    .page-header { margin-bottom: 30px; }
    .page-header h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 5px; }
    .page-header p { color: var(--muted-color); font-size: 1.1rem; }

    .tool-card {
      background: var(--card-color);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: -5px -5px 10px var(--shadow-dark), 5px 5px 10px var(--shadow-light);
      border: 1px solid var(--border-color);
    }

    .input-area {
      margin-bottom: 20px;
      padding: 20px;
      border: 2px dashed var(--muted-color);
      border-radius: var(--radius);
      text-align: center;
      transition: var(--transition);
      cursor: pointer;
    }
    .input-area:hover {
      border-color: var(--primary-color);
      background-color: var(--bg-color);
    }
    .input-area.drag-over { 
      border-color: var(--primary-color); 
      background-color: var(--bg-color); 
      transform: scale(1.02);
    }
    .input-area label { 
      cursor: pointer; 
      color: var(--primary-color); 
      font-weight: 700; 
      text-decoration: underline;
    }
    .input-area input[type="file"] { display: none; }
    
    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .option-group label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--muted-color); }
    input[type="number"], input[type="text"] {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border-color);
      border-radius: 10px;
      background: var(--bg-color);
      color: var(--text-color);
      font-size: 1rem;
      transition: var(--transition);
    }
    input[type="number"]:focus, input[type="text"]:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(74, 85, 255, 0.1);
    }

    .btn {
      background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 15px 30px;
      cursor: pointer;
      font-weight: 700;
      font-size: 1rem;
      transition: var(--transition);
      box-shadow: 0 5px 15px rgba(74, 85, 255, 0.2);
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
    .btn:hover { 
      transform: translateY(-3px); 
      box-shadow: 0 8px 20px rgba(74, 85, 255, 0.3); 
    }
    .btn.outline { 
      background: transparent; 
      color: var(--primary-color); 
      border: 2px solid var(--primary-color); 
      box-shadow: none; 
    }
    .btn.outline:hover {
      background: var(--primary-color);
      color: #fff;
    }
    .btn:disabled { 
      background: var(--muted-color); 
      box-shadow: none; 
      cursor: not-allowed; 
      opacity: 0.6; 
      transform: none;
    }

    .preview-area { margin-top: 20px; min-height: 150px; }
    .sort-instructions {
      background: var(--bg-color);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 15px;
      font-size: 0.9rem;
      color: var(--muted-color);
      text-align: center;
      display: none;
    }
    .sort-instructions.show {
      display: block;
    }
    .sort-instructions i {
      color: var(--primary-color);
      margin-inline-end: 8px;
    }
    
    .thumbs { 
      display: flex; 
      gap: 15px; 
      flex-wrap: wrap; 
      min-height: 100px;
      padding: 10px;
      border-radius: var(--radius);
      transition: var(--transition);
    }
    .thumbs.sortable-active {
      background: var(--bg-color);
      border: 2px dashed var(--primary-color);
    }
    
    .thumb {
      position: relative;
      background: var(--bg-color);
      border-radius: 12px;
      padding: 10px;
      cursor: grab;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: var(--transition);
      border: 2px solid transparent;
    }
    .thumb:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
      border-color: var(--primary-color);
    }
    .thumb.sortable-ghost {
      opacity: 0.4;
      transform: rotate(5deg);
    }
    .thumb.sortable-chosen {
      cursor: grabbing;
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(74, 85, 255, 0.3);
      border-color: var(--primary-color);
    }
    .thumb canvas, .thumb img { 
      max-width: 140px; 
      height: auto; 
      border-radius: 8px; 
      pointer-events: none;
    }
    
    /* File order indicator */
    .thumb::before {
      content: attr(data-order);
      position: absolute;
      top: -8px;
      right: -8px;
      background: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(74, 85, 255, 0.3);
    }

    .status-area { margin-top: 20px; }
    .progress-bar {
      width: 100%;
      height: 8px;
      background-color: var(--bg-color);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 10px;
      display: none;
    }
    .progress-bar-inner { 
      width: 0%; 
      height: 100%; 
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); 
      transition: width 0.3s; 
    }
    .status-text { font-weight: 500; color: var(--muted-color); }
    .ok { color: #2ecc71; }
    .err { color: #e74c3c; }

    /* Toast Notifications */
    .toast-container { position: fixed; bottom: 20px; inset-inline-start: 20px; z-index: 2000; }
    .toast {
      background: #34495e;
      color: #fff;
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      opacity: 0;
      transform: translateY(20px);
      animation: toast-in 0.5s forwards;
    }
    .toast.error { background: #c0392b; }
    .toast.success { background: #27ae60; }
    @keyframes toast-in { to { opacity: 1; transform: translateY(0); } }

    /* Responsive Design */
    @media (max-width: 768px) {
      body { flex-direction: column; overflow: visible; }
      .sidebar { width: 100%; height: auto; }
      .main-content { height: auto; }
      .thumbs { justify-content: center; }
    }
  
  </style>
</head>
<body>

  <aside class="sidebar">
    <div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 10px;">
      <img src="..//Photo/timepdf.png" style="width: 90px; height: 90px; object-fit: contain; margin-bottom: 10px; border-radius: 50%; box-shadow: 0 2px 12px rgba(0,0,0,0.10);" />
    </div>
    <div class="logo" style="margin-bottom: 40px; text-align: center;">PDF Suite</div>
    <ul class="nav-menu">
      <li class="nav-item"><a data-page="merge" class="nav-link active"><i class="fas fa-link fa-fw"></i> ÿØŸÖÿ¨ ÿßŸÑŸÖŸÑŸÅÿßÿ™</a></li>
      <li class="nav-item"><a data-page="img2pdf" class="nav-link"><i class="fas fa-image fa-fw"></i> ÿµŸàÿ± ÿ•ŸÑŸâ PDF</a></li>
      <li class="nav-item"><a data-page="pdf2img" class="nav-link"><i class="fas fa-file-image fa-fw"></i> PDF ÿ•ŸÑŸâ ÿµŸàÿ±</a></li>
      <li class="nav-item"><a data-page="split" class="nav-link"><i class="fas fa-cut fa-fw"></i> ÿ™ŸÇÿ≥ŸäŸÖ ŸÖŸÑŸÅ</a></li>
      <li class="nav-item"><a data-page="extract" class="nav-link"><i class="fas fa-file-alt fa-fw"></i> ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÜÿµŸàÿµ</a></li>
    </ul>
    <button class="theme-switcher" id="theme-switcher"><i class="fas fa-moon"></i></button>
  </aside>

  <main class="main-content">
    <!-- üìå ŸÜŸÅÿ≥ ÿßŸÑÿµŸÅÿ≠ÿßÿ™ (merge, img2pdf, pdf2img, split, extract) -->
    <!-- ŸÑŸÖ ÿ£ŸÑŸÖÿ≥Ÿáÿß ÿ£ÿ®ÿØÿßŸãÿå ÿ®ŸÇŸäÿ™ ŸÉŸÖÿß ÿπŸÜÿØŸÉ -->
  </main>

  <div id="toast-container" class="toast-container"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // ... ŸÜŸÅÿ≥ ÿßŸÑÿ£ŸÉŸàÿßÿØ ÿßŸÑÿπÿßŸÖÿ© ...

      // üìå Ÿàÿ≠ÿØÿ© ÿµŸàÿ± ÿ•ŸÑŸâ PDF (ÿßŸÑÿ™ÿπÿØŸäŸÑ ŸáŸÜÿß ŸÅŸÇÿ∑)
      (() => {
        const tool = 'img2pdf';
        const state = appState.img2pdf;
        const input = document.getElementById(`${tool}-input`);
        const thumbs = document.getElementById(`${tool}-thumbs`);
        const runBtn = document.getElementById(`${tool}-run`);
        const clearBtn = document.getElementById(`${tool}-clear`);
        const sortInstructions = document.getElementById(`${tool}-sort-instructions`);

        // ... ŸÜŸÅÿ≥ ŸÉŸàÿØ thumbs Ÿà clear ...

        if (runBtn) {
          runBtn.addEventListener('click', async () => {
            if (state.files.length === 0) return showToast('ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ', 'error');
            runBtn.disabled = true;
            updateStatus(tool, 'üöÄ ÿ®ÿØÿ° ÿ•ŸÜÿ¥ÿßÿ° PDF...', 0);

            try {
              const pdfDoc = await PDFLib.PDFDocument.create();

              for (let i = 0; i < state.files.length; i++) {
                const file = state.files[i];
                const bytes = await file.arrayBuffer();
                let img;
                if (file.type === 'image/png') img = await pdfDoc.embedPng(bytes);
                else img = await pdfDoc.embedJpg(bytes);

                // ‚úÖ ÿ™ÿ≠ÿØŸäÿØ ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸÅÿ≠ÿ© (A4 ÿ£Ÿà Letter ÿ£Ÿà Auto)
                const sizeChoice = document.getElementById("img2pdf-size")?.value || "auto";
                const fitChoice = document.getElementById("img2pdf-fit")?.value || "fit";

                let pageWidth, pageHeight;
                if (sizeChoice === "A4") {
                  pageWidth = 595.28; 
                  pageHeight = 841.89;
                } else if (sizeChoice === "Letter") {
                  pageWidth = 612;  
                  pageHeight = 792;  
                } else {
                  pageWidth = img.width;
                  pageHeight = img.height;
                }

                const page = pdfDoc.addPage([pageWidth, pageHeight]);

                if (fitChoice === "fit" && sizeChoice !== "auto") {
                  const scale = Math.min(pageWidth / img.width, pageHeight / img.height);
                  const imgW = img.width * scale;
                  const imgH = img.height * scale;
                  const x = (pageWidth - imgW) / 2;
                  const y = (pageHeight - imgH) / 2;
                  page.drawImage(img, { x, y, width: imgW, height: imgH });
                } else {
                  page.drawImage(img, { x: 0, y: 0, width: img.width, height: img.height });
                }

                updateStatus(tool, `ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿµŸàÿ±ÿ© ${i + 1}/${state.files.length}`, ((i + 1) / state.files.length) * 100);
              }

              const pdfBytes = await pdfDoc.save();
              downloadBlob(new Blob([pdfBytes], { type: 'application/pdf' }), 'images.pdf');
              updateStatus(tool, '‚úÖ ÿßŸÉÿ™ŸÖŸÑ ÿ•ŸÜÿ¥ÿßÿ° PDF!');
              showToast('ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÑŸÅ PDF!', 'success');
            } catch (err) { 
              updateStatus(tool, `‚ùå ÿÆÿ∑ÿ£: ${err.message}`); 
              showToast('ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° PDF.', 'error'); 
            }
            runBtn.disabled = false;
          });
        }
      })();

      // ... ÿ®ÿßŸÇŸä ÿßŸÑŸàÿ≠ÿØÿßÿ™ (merge, pdf2img, split, extract) ÿ®ÿØŸàŸÜ ÿ£Ÿä ÿ™ÿ∫ŸäŸäÿ± ...
    });
  </script>
</body>
</html>
